<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:"
    />
    <title>僵尸来袭</title>
    <style>
      body {
        color: #000000;
        font-family: sans-serif;
        overflow: hidden;
        margin: 0;
        padding: 0;
      }
      :root,
      body.is-fullscreen {
        background-color: #ffffff;
      }
      [hidden] {
        display: none !important;
      }
      h1 {
        font-weight: normal;
      }
      a {
        color: inherit;
        text-decoration: underline;
        cursor: pointer;
      }
      #hh {
        border-radius: 5px;
      }
      .sy {
      }
      .button {
        border-radius: 10px;
        border-style: none;
        font-family: 黑体;
        background-color: aqua;
        color: black;
        transition: background-color 1s ease, color 1s ease;
      }
      .button:hover {
        border-radius: 10px;
        border-style: none;
        font-family: 黑体;
        background-color: darkblue;
        color: aliceblue;
        transition: background-color 1s ease, color 1s ease;
      }

      #app,
      #loading,
      #error,
      #launch {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      .screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        cursor: default;
        user-select: none;
        -webkit-user-select: none;
        background-color: #ffffff;
      }
      #launch {
        background-color: rgba(0, 0, 0, 0.7);
        cursor: pointer;
      }
      .green-flag {
        width: 80px;
        height: 80px;
        padding: 16px;
        border-radius: 100%;
        background: rgba(255, 255, 255, 0.75);
        border: 3px solid hsla(0, 100%, 100%, 1);
        display: flex;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
      }
      #loading {
      }
      .progress-bar-outer {
        border: 1px solid currentColor;
        height: 10px;
        width: 200px;
        max-width: 200px;
      }
      .progress-bar-inner {
        height: 100%;
        width: 0;
        background-color: currentColor;
      }
      .loading-text,
      noscript {
        font-weight: normal;
        font-size: 36px;
        margin: 0 0 16px;
      }
      .loading-image {
        margin: 0 0 16px;
      }
      #error-message,
      #error-stack {
        font-family: monospace;
        max-width: 600px;
        white-space: pre-wrap;
        user-select: text;
        -webkit-user-select: text;
      }
      #error-stack {
        text-align: left;
        max-height: 200px;
        overflow: auto;
      }
      .control-button {
        width: 2rem;
        height: 2rem;
        padding: 0.375rem;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
        user-select: none;
        -webkit-user-select: none;
        cursor: pointer;
        border: 0;
        border-radius: 4px;
      }
      .control-button:hover {
        background: #ff4c4c26;
      }
      .control-button.active {
        background: #ff4c4c59;
      }
      .fullscreen-button {
        background: white !important;
      }
      .standalone-fullscreen-button {
        position: absolute;
        top: 0;
        right: 0;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 0 0 0 4px;
        padding: 4px;
        cursor: pointer;
      }
      .sc-canvas {
        cursor: auto;
      }
      .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
        background-color: #ff8c1a;
      }
      .sc-monitor-row-value-outer {
        background-color: #fc662c;
      }
      .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
        background-color: #e25b27;
      }
    </style>
    <meta name="theme-color" content="#ffffff" />
    <link
      rel="icon"
      href="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMzUuNzUiIGhlaWdodD0iMTM3LjU4ODE1IiB2aWV3Qm94PSIwLDAsMTM1Ljc1LDEzNy41ODgxNSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIyNDAuNSIgeTE9IjExNiIgeDI9IjI0MC41IiB5Mj0iMjQ0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaWQ9ImNvbG9yLTEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2IxZmYwMCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzIuMjUsLTExMi41KSI+PGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTc2LjUsMjQ0di0xMjhoMTI4djEyOHoiIGZpbGw9InVybCgjY29sb3ItMSkiIHN0cm9rZT0iI2ZmMDAwMCIgc3Ryb2tlLXdpZHRoPSI3Ii8+PHBhdGggZD0iTTIzNS43NSwxNTUuNWMwLC0xLjM4MDcxIDEuMTE5MjksLTIuNSAyLjUsLTIuNWMxLjM4MDcxLDAgMi41LDEuMTE5MjkgMi41LDIuNWMwLDEuMzgwNzEgLTEuMTE5MjksMi41IC0yLjUsMi41Yy0xLjM4MDcxLDAgLTIuNSwtMS4xMTkyOSAtMi41LC0yLjV6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PHBhdGggZD0iTTI2OC43NSwxNjkuNWMwLC0xLjM4MDcxIDEuMTE5MjksLTIuNSAyLjUsLTIuNWMxLjM4MDcxLDAgMi41LDEuMTE5MjkgMi41LDIuNWMwLDEuMzgwNzEgLTEuMTE5MjksMi41IC0yLjUsMi41Yy0xLjM4MDcxLDAgLTIuNSwtMS4xMTkyOSAtMi41LC0yLjV6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PHBhdGggZD0iTTI3MS4xNDM2NiwyMjcuMDc0NjVsMC44Mzg1NywwLjE1NzU5YzMuODg0NTcsLTMuNzE3NjggMi4yNjkyOSwtOC44NjM2MiAwLjg3MTQsLTEzLjUxOTg3Yy0wLjgzNjQ5LC0yLjc4NjI3IC0xLjQwNDczLC01Ljc4NDIyIC0zLjEzMTc0LC04LjI1MDU5Yy0wLjM2ODA3LC0wLjUyNTY0IC0wLjc5MzgzLC0xLjAwMjQ4IC0xLjI0ODk2LC0xLjQ1NDU0YzAuMzk5MjQsMS43NTM2NSAwLjgzNDg3LDMuNTIyNTIgMS4yMDUzNSw1LjM5ODI5YzEuMDYyMjMsNS4zNzgxMSAxLjI0MDQ3LDEyLjI5NDMyIDAuNDk1NzYsMTguMTQzMmMwLjQ4Mjg3LC0wLjM1MjQgMC45Njk2MSwtMC40NzQwOSAwLjk2OTYxLC0wLjQ3NDA5ek0yNjkuMDE3NzcsMTk3LjczMjI0YzAuMDQyMDMsMC4wNDIwMiA0LjYxNTA1LDQuNTk4MzkgNC43NjAzNCw0LjgwNTk5YzIuMDU5MzUsMi45NDI2MiAyLjg2ODIyLDYuNDEzNjMgMy44NjgyNiw5Ljc0OTQxYzIuMDEwMTYsNi43MDUyNSAzLjExNTEzLDEzLjA3MzE2IC0yLjEyODYsMTguNDgwMTNsLTMuMTYxNDMsMS4xNTc1OWMwLDAgLTEuODYxMDcsMC40NjUyNyAtMi43MzAyNiwtMS4wNDk1OWMtMC44MzQxMSw0LjMwNzQxIC0xLjI1MDI0LDcuNzAwOTggLTQuODc2MDgsMTAuNjI0MjNsLTIuNSwwLjVjMCwwIC0yLjUsMCAtMi41LC0yLjVjMCwtMi41IDIuNSwtMi41IDIuNSwtMi41bC0wLjUsMC41YzMuMjgzOTcsLTIuMTQ1ODMgMy41MDc4MywtOS4yOTgwNyAzLjUsLTEzYy0wLjAwOTYxLC00LjU0MTI5IDAuNDgyMTcsLTkuNDMzMTcgLTAuNDI4MjksLTEzLjkwNTUzYy0wLjU2Mjg2LC0yLjc2NDg0IC0xLjIyNzgsLTUuMzI5OTggLTEuNzQwNTQsLTcuOTMzNGMtMi44NTY1NiwwLjg5NzUxIC01Ljg5NjQ1LDIuMjAwMTcgLTguNzM2NjksMi43NjcyMmMtOC43MzMwNSwxLjc0MzU1IC0xNy43NDI3MywtMC4yMjE0OCAtMjUuMzUzMTcsLTQuNzY4MjhjLTQuNzY3NDQsLTIuODQ4MjYgLTkuNDgwNjEsLTYuOTQwMTcgLTEwLjIxNzEzLC0xMi44MTMyNmMtMC4xNjIzLC0xLjI5NDE1IC0wLjQxMjcsLTIuNzYyMTEgMC4yMTE4NiwtMy45MDcxNWMwLjc2NzM1LC0xLjQwNjggMi40ODA2MSwtMi42NDc1MyA0LjE0OTgxLC0zLjY4ODE5Yy0wLjA0NzA3LC0wLjA1NzMgLTAuMDk0MTQsLTAuMTE0OTIgLTAuMTQxMjEsLTAuMTcyODdjLTIuODIxMjcsLTEyLjUxNzA1IC0wLjI4OTE2LC0yNC4xMDczOSA2LjYzNTM4LC0zNC45MDM1NWMwLjk4ODg4LC0xLjU0MTc3IDEuNjk2NDYsLTMuMzIzMSAzLjAxNjQ0LC00LjU5Mjk3YzAuNjM4MTcsLTAuNjEzOTUgNS41Njk2NCwtMi4yNTk5OCA2LjQzNjIyLC0yLjQ5MTMyYzUuOTUzNTIsLTEuNTg5MyAxMy4wNCwtMy4wNjc3NSAxOS4xNjczNCwtMy4wOTA3MWMwLDAgMi4yNjE1NCwwIDIuNDgyNjYsMi4xNTA5OGMyLjk1NzY2LDAuNjM2MzQgNS43NDk3OCwxLjYwODA0IDguNjU5MDEsMi40MzI3N2MxLjAwMDY3LDAuMjgzNjcgMi4xMzM2MSwwLjE5ODMyIDMuMDM3OTgsMC43MTIwNmMzLjI3MjA3LDEuODU4NzggNS43MDM4Miw2LjU4NDM4IDcuOTY2NDEsOS4zNjI3MmMzLjYyMDAzLDQuNDQ1MiA4LjA4NDEzLDkuMDg0NjkgOS43ODcwNiwxNC43NjcwOGMxLjg4MTc5LDYuMjc5MjEgLTIuMjA5MzEsMTIuNDQ2NDMgLTQuMzMxMTgsMTcuOTI3ODRjLTQuNzkxNDEsNC45Mzg0NyAtMTAuMjk3MDQsOS4wMDk0IC0xNi43MTM0OSwxMS40ODMzNGMtMC4yMzA4OCwwLjA4OTAxIC0wLjk5MjM1LDAuNDIyNjkgLTEuOTE5MzYsMC44MjM5OGMwLjAzMDkxLDAuMjA1NTMgMC4wMzA5MSwwLjMzOTIxIDAuMDMwOTEsMC4zMzkyMWMwLDAuNjY0ODUgMC4wMjM2NiwxLjMxMzg4IDAuMDY3LDEuOTUwNzJjMC45ODA2NCwwLjA2MTM5IDEuNzAwNzYsMC43ODE1MiAxLjcwMDc2LDAuNzgxNTJ6TTI0MC43NDAyOSwxNzguNDUxNDVjLTIuMjI2MDEsMC40NDUyIC01LjUxMTk4LDAuNTA2MzIgLTcuNTcwOTQsMS4zNzMzOGMtMC44MTI0OSwwLjM0MjE0IC0xLjU1NTgsMC44MTMyMSAtMi4yNzkyLDEuMzIyNTJjMS45OTU1LDEuNTgxMSA0LjE3MzAxLDIuODU4MTIgNi41NjI4OCw0LjE2MTE0YzIuNDk3MTIsMS4zNjE0OCA1LjE4NywzLjk2MDQ3IDcuNzUzNjgsNC44ODE4MmMwLjkyNCwwLjMzMTY4IDEuOTUzNjEsMC4yMDExNiAyLjkyNTU5LDAuMzM5MWM0LjMwODU4LDAuNjExNDcgOS4yODA4MywxLjg4OTY1IDEzLjY0NDkzLDEuMDE1N2MxLjk4NDMsLTAuMzk3MzcgMy42OTQ5LC0xLjY1NzA2IDUuNTg0MzIsLTIuMzgxOTFjNS40MDE4MiwtMi4wNzIzMyAxMC4wODI3LC01LjUxMzUyIDE0LjI4NjUxLC05LjUxNjY2YzEuNTAzOTQsLTQuMTY2MDggNS4xOTc5OCwtOS4yODM2IDMuNjY4ODIsLTE0LjA3MjE2Yy0xLjU1MDEyLC00Ljg1NDIyIC01LjY5ODI3LC04Ljk1MTcxIC04Ljc5Nzk5LC0xMi43NTg2OGMtMS40NTk3LC0xLjc5Mjc1IC00LjEyMjkxLC02Ljg3MDM1IC02LjQ0ODU0LC04LjExMTUxYy0wLjU4MzE2LC0wLjMxMTIzIC0xLjMyMjI5LC0wLjEyMTU0IC0xLjk2MjAyLC0wLjI4Nzk0Yy0yLjk4MzY1LC0wLjc3NjAzIC01LjgwODM2LC0xLjg1OTM5IC04Ljg0ODYyLC0yLjQ2NDhsLTEuNTA5NzEsMC4wNDg1NWMwLDAgLTIuMDc1ODgsMCAtMi40NDQ0LC0xLjg5MTYzYy00LjkzNDg3LDAuMzYzOTcgLTEwLjMyNTM2LDEuNTg1NTkgLTE0Ljg4ODI2LDIuODAwOTJjLTEuNTQ4MjUsMC40MTIzNyAtMy40NjYyNCwwLjM0MTQgLTQuNTYzNzgsMS41MDg2OGMtMC45MDAxOSwwLjk1NzM4IC0xLjMwMjkyLDIuMjgyOSAtMS45ODM1NiwzLjQwNzAzYy01LjgwMjI5LDkuNTgyNzYgLTguMDkxMTcsMTguNjg2MzkgLTYuNDI1MDUsMjkuNzA2NzhjMS4yNDU4NSwtMC44ODIzMyAyLjQ4MzY3LC0xLjc3NzA1IDMuODg1NzEsLTIuMzU2NmMyLjMyNjA2LC0wLjk2MTUxIDUuOTA3MzgsLTEuMTIyMjkgOC40MjkwNiwtMS42MjY2MmwxLjk5MDI5LC0wLjA0ODU1YzAsMCAwLjQwNzc1LDAgMC44OTM5LDAuMTY0NjdjMC4yOTMxNiwtMC40NDIwNSAxLjA4MjI2LC0xLjM4Nzg2IDIuMzY3MywtMS4xODU4OWMwLjU0NTExLC0wLjc5NTgyIDEuMDczNTIsLTEuNjExNzMgMS44ODg2MywtMi4wODI4NGMyLjE5NjU3LC0xLjI2OTU0IDkuNTUyMTQsLTIuNjI3MzEgMTEuOTI1MzYsLTAuMzM3MjhjMS45NzU4NCwxLjkwNjU4IDMuODM2OTEsOS4zNzMxMiAyLjEyODk5LDEyLjEyMDk4Yy0yLjM0NTU4LDMuNzczODEgLTkuODkyMjUsNC45NjA3MyAtMTMuOTEwMzgsNC4zMTE4NGMtMS41NDI2MiwtMC4yNDkxMiAtMy4zNzU1MiwtMC4xNDU1MSAtNC41MzI4NCwtMS4xOTU0NGMtMS41NzU0MiwtMS40MjkyNCAtMS41NTQyOSwtNC4zMjcyMSAtMS4yMjcwNCwtNi44MTg0NXpNMjIzLjUxMzk4LDE4Ni4wNjAzOWMtMC43OTI3MSwxLjA1MTMgMC40MTkzMywyLjYzNDEzIDAuOTc1MTYsMy44Mjc3MmMxLjY1MjUsMy41NDg2MiA1Ljk0OTQsNS44MjE0MSA5LjI4NTAxLDcuMzMxMjljMi4wNzYwNSwwLjkzOTczIDQuMjU4MDYsMS42MjUyNyA2LjM4MjE3LDIuNDUwNjZjMC45MzU3MSwwLjM2MzYgMS42ODczLDEuMTgyNzIgMi42NjgwNywxLjM5NjgyYzYuNDIzODksMS40MDIyOSAxMy40OTAzNywtMS42NjEyNCAxOS41MzQxNCwtMy40MTE4Yy0wLjAyOTgsLTAuMzY5MzkgLTAuMDUzOTUsLTAuNzQyMTkgLTAuMDcxODQsLTEuMTE4OTVjLTQuODAwMTUsMC44MzAyOCAtMTAuMjI0NDUsLTAuMjk1MzkgLTE0LjkxODk3LC0xLjA2NTUzYy0xLjM1Nzc0LC0wLjIyMjc0IC0yLjc4MjcxLC0wLjE4NyAtNC4wNzQ0MSwtMC42NjA5Yy0yLjc3NTM2LC0xLjAxODIzIC01LjU4NjE3LC0zLjY2NjU5IC04LjI0NjMyLC01LjExODE4Yy0zLjI3Njk2LC0xLjc4ODE4IC01LjkzOTA1LC0zLjUwMzIxIC04LjM5Njg3LC01LjcyOTc1Yy0xLjI0MTkxLDAuNzQxNDYgLTIuODcxOCwxLjc0ODA2IC0zLjEzNjEzLDIuMDk4NjJ6TTI0Ni41MjU3MSwxNzcuNTM3NjhjLTAuMTQzNywxLjA2NTEgLTAuMTk3NzQsMi4xNDQ1NSAtMC4yODc4NywzLjIxNTk4Yy0wLjAyNzQ1LDAuMzI2MjkgLTAuNTI3MTUsMC43Nzc4NSAtMC4yNDg4LDAuOTUwM2MwLjQxOTQsMC4yNTk4NSAwLjk3NDU0LC0wLjE2ODI3IDEuNDY3MTYsLTAuMTk1NDRjMS43Njg2LC0wLjA5NzU1IDcuOTkxOCwwLjMzOTMyIDkuMDg5NjIsLTEuNjg4MTZjMC4yOTI3MSwtMC41NDA1OCAtMC4yNTY0OCwtMS4yMDY4NyAtMC4yOTU4MiwtMS44MjAzNmMtMC4wNzg5MywtMS4yMzExMSAwLjQwNDYsLTIuOTYwMzUgLTAuNTc1MTksLTQuMDU4NjZjLTAuMjYwMDgsLTAuMjkxNTUgLTAuNzgwNSwwLjA0MTUgLTEuMTcxMTUsMC4wNDY1Yy0zLjA1ODY1LDAuMDM5MTUgLTQuNDU3MjcsLTAuMDA4NjQgLTYuMzAxNDksMi41NzM5YzAsMCAtMC42NjgwNSwwLjgzNTA3IC0xLjY3NjQ3LDAuOTc1OTR6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PHBhdGggZD0iTTE3NS43NSwyNDUuNXYtNTdjMCwwIDguMTUwNTYsMS4wOTQ4NSAxMi45Njc1LDEuNzQxOTFjNi4wNjEyNywwLjgxNDIgMTkuMDMyNSwxNy4yNTgwOSAxOS4wMzI1LDE3LjI1ODA5YzAsMCAyLjE0ODkyLDEyLjU2MjkzIDMuMjI4NjgsMTguODc1MzZjMS4wODY4Niw2LjM1Mzk3IC0xLjIyODY4LDIwLjEyNDY0IC0xLjIyODY4LDIwLjEyNDY0eiIgZmlsbD0iIzAwZmZmZiIgc3Ryb2tlPSIjMDBmZmZmIiBzdHJva2Utd2lkdGg9IjciLz48cGF0aCBkPSJNMTkwLjI1LDIxMi43NWMwLC01LjEwODYzIDQuMTQxMzcsLTkuMjUgOS4yNSwtOS4yNWM1LjEwODYzLDAgOS4yNSw0LjE0MTM3IDkuMjUsOS4yNWMwLDUuMTA4NjMgLTQuMTQxMzcsOS4yNSAtOS4yNSw5LjI1Yy01LjEwODYzLDAgLTkuMjUsLTQuMTQxMzcgLTkuMjUsLTkuMjV6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMGZmZmYiIHN0cm9rZS13aWR0aD0iNyIvPjwvZz48L2c+PC9zdmc+PCEtLXJvdGF0aW9uQ2VudGVyOjY3Ljc1OjY3LjUtLT4="
    />
    <script src="https://fehaxu.github.io/jQueryAssets/jquery-1.11.1.min.js"></script>
    <script src="https://fehaxu.github.io/app/sb3html/scriptAll.js"></script>
  </head>
  <body>
    <div id="app"></div>

    <div id="launch" class="screen" hidden title="Click to start">
      <div class="green-flag">
        <svg viewBox="0 0 16.63 17.5" width="42" height="44">
          <defs>
            <style>
              .cls-1,
              .cls-2 {
                fill: #4cbf56;
                stroke: #45993d;
                stroke-linecap: round;
                stroke-linejoin: round;
              }
              .cls-2 {
                stroke-width: 1.5px;
              }
            </style>
          </defs>
          <path
            class="cls-1"
            d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"
          />
          <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75" />
        </svg>
      </div>
    </div>

    <div id="loading" class="screen">
      <noscript>Enable JavaScript</noscript>
      <h1 class="loading-text">正在努力加载...</h1>

      <div class="progress-bar-outer">
        <div class="progress-bar-inner" id="loading-inner"></div>
      </div>
    </div>

    <div id="error" class="screen" hidden>
      <h1>错误</h1>
      <details>
        <summary id="error-message"></summary>
        <p id="error-stack" style="display: none"></p>
      </details>
    </div>

    <script src="script.js"></script>
    <script>
      const appElement = document.getElementById("app");
      const launchScreen = document.getElementById("launch");
      const loadingScreen = document.getElementById("loading");
      const loadingInner = document.getElementById("loading-inner");
      const errorScreen = document.getElementById("error");
      const errorScreenMessage = document.getElementById("error-message");
      const errorScreenStack = document.getElementById("error-stack");

      const handleError = (error) => {
        console.error(error);
        if (!errorScreen.hidden) return;
        errorScreen.hidden = false;
        errorScreenMessage.textContent = "" + error;
        let debug = (error && error.stack) || "no stack";
        debug += "\nUser agent: " + navigator.userAgent;
        errorScreenStack.textContent = debug;
      };
      const setProgress = (progress) => {
        if (loadingInner) loadingInner.style.width = progress * 100 + "%";
      };
      const interpolate = (a, b, t) => a + t * (b - a);

      try {
        setProgress(0.1);

        const scaffolding = new Scaffolding.Scaffolding();
        scaffolding.width = 480;
        scaffolding.height = 360;
        scaffolding.resizeMode = "preserve-ratio";
        scaffolding.editableLists = false;
        scaffolding.usePackagedRuntime = false;
        scaffolding.setup();
        scaffolding.appendTo(appElement);

        const vm = scaffolding.vm;
        window.scaffolding = scaffolding;
        window.vm = scaffolding.vm;
        window.Scratch = {
          vm,
          renderer: vm.renderer,
          audioEngine: vm.runtime.audioEngine,
          bitmapAdapter: vm.runtime.v2BitmapAdapter,
          videoProvider: vm.runtime.ioDevices.video.provider,
        };

        scaffolding.setUsername(
          "FHX".replace(/#/g, () => Math.floor(Math.random() * 10))
        );
        scaffolding.setAccentColor("#ff4c4c");

        scaffolding.addCloudProvider(
          new Scaffolding.Cloud.WebSocketProvider(
            ["wss://clouddata.turbowarp.org", "wss://clouddata.turbowarp.xyz"],
            ""
          )
        );

        const greenFlagButton = document.createElement("img");
        greenFlagButton.src =
          "data:image/svg+xml," +
          encodeURIComponent(
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.63 17.5"><path d="M.75 2a6.44 6.44 0 017.69 0h0a6.44 6.44 0 007.69 0v10.4a6.44 6.44 0 01-7.69 0h0a6.44 6.44 0 00-7.69 0" fill="#4cbf56" stroke="#45993d" stroke-linecap="round" stroke-linejoin="round"/><path stroke-width="1.5" fill="#4cbf56" stroke="#45993d" stroke-linecap="round" stroke-linejoin="round" d="M.75 16.75v-16"/></svg>'
          );
        greenFlagButton.className = "control-button green-flag-button";
        greenFlagButton.draggable = false;
        greenFlagButton.addEventListener("click", () => {
          scaffolding.greenFlag();
        });
        scaffolding.addEventListener("PROJECT_RUN_START", () => {
          greenFlagButton.classList.add("active");
        });
        scaffolding.addEventListener("PROJECT_RUN_STOP", () => {
          greenFlagButton.classList.remove("active");
        });
        scaffolding.addControlButton({
          element: greenFlagButton,
          where: "top-left",
        });

        vm.setTurboMode(false);
        if (vm.setInterpolation) vm.setInterpolation(false);
        if (vm.setFramerate) vm.setFramerate(30);
        if (vm.renderer.setUseHighQualityRender)
          vm.renderer.setUseHighQualityRender(false);
        if (vm.setRuntimeOptions)
          vm.setRuntimeOptions({
            fencing: false,
            miscLimits: false,
            maxClones: 9999999999,
          });
        if (vm.setCompilerOptions)
          vm.setCompilerOptions({
            enabled: true,
            warpTimer: false,
          });
        if (vm.renderer.setMaxTextureDimension)
          vm.renderer.setMaxTextureDimension(2048);

        if (typeof ScaffoldingAddons !== "undefined") {
          ScaffoldingAddons.run(scaffolding, {
            gamepad: false,
            pointerlock: false,
            specialCloudBehaviors: false,
            unsafeCloudBehaviors: false,
            pause: false,
          });
        }

        scaffolding.setExtensionSecurityManager({
          getSandboxMode: () => "unsandboxed",
          canLoadExtensionFromProject: () => true,
        });
        for (const extension of [
          "https://extensions.turbowarp.org/fetch.js",
          "https://extensions.turbowarp.org/NOname-awa/more-comparisons.js",
          "https://extensions.turbowarp.org/stretch.js",
        ]) {
          vm.extensionManager.loadExtensionURL(extension);
        }
      } catch (e) {
        handleError(e);
      }
    </script>

    <script>
      const getProjectData = (function () {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };

        storage.addWebStore(
          [
            storage.AssetType.ImageVector,
            storage.AssetType.ImageBitmap,
            storage.AssetType.Sound,
            storage.AssetType.Font,
          ].filter((i) => i),
          (asset) =>
            new URL(
              "./assets/" + asset.assetId + "." + asset.dataFormat,
              location
            ).href
        );
        return () =>
          new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.onload = () => {
              resolve(xhr.response);
            };
            xhr.onerror = () => {
              if (location.protocol === "file:") {
                reject(new Error("正版验证失败"));
              } else {
                reject(new Error("连接超时"));
              }
            };
            xhr.onprogress = (e) => {
              if (e.lengthComputable) {
                setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
              }
            };
            xhr.responseType = "arraybuffer";
            xhr.open("GET", "./assets/project.json");
            xhr.send();
          });
      })();
    </script>
    <script>
      const run = async () => {
        const projectData = await getProjectData();
        await scaffolding.loadProject(projectData);
        setProgress(1);
        loadingScreen.hidden = true;
        if (true) {
          try {
            setTimeout(() => {
              console.log("等待三秒后执行");
              $(
                "<h3 class='sy' style='margin-left: 20px;'>封皓轩制作</h3>"
              ).insertAfter(".green-flag-button");
              $(
                "<input type='button' value='反馈' onClick='fk(true)' style='border-style: none; font-size: 30px;margin-left:20px;' class='button'>"
              ).insertAfter(".sy");
            }, 3000);
          } catch (a) {
            console.error("多加代码错误", a);
          }
          scaffolding.start();
        } else {
          launchScreen.hidden = false;
          launchScreen.addEventListener("click", () => {
            launchScreen.hidden = true;
            scaffolding.start();
          });
          launchScreen.focus();
        }
      };
      run().catch(handleError);
    </script>
  </body>
</html>
